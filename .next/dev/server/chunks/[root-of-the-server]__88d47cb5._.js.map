{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///D:/DevSpace/Repositories/sankalp-ai-fitness/src/app/api/generate-diet/route.ts"],"sourcesContent":["import { GoogleGenAI, Type } from \"@google/genai\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nconst ai = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY || \"\" });\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const userData = await req.json();\r\n    \r\n    const prompt = `\r\n      Generate a personalized weekly diet plan for a user with the following profile:\r\n      Diet Type: ${userData.dietType}\r\n      Fitness Goals: ${userData.goals.join(\", \")}\r\n      Likes/Dislikes: ${userData.preferences}\r\n      Allergies: ${userData.allergies || 'None'}\r\n      Region/Cuisine: ${userData.region || 'Flexible'}\r\n      Meals per Day: ${userData.mealsPerDay || '3'}\r\n      Budget: ${userData.budgetLevel || 'Medium'}\r\n\r\n      Provide Indian-focused options where applicable but stay flexible.\r\n      For EACH meal, you MUST provide a detailed \"recipe\" field which includes step-by-step preparation instructions.\r\n      Return the plan in JSON format.\r\n    `;\r\n\r\n    const response = await ai.models.generateContent({\r\n      model: \"gemini-2.5-flash\",\r\n      contents: prompt,\r\n      config: {\r\n        responseMimeType: \"application/json\",\r\n        responseSchema: {\r\n          type: Type.OBJECT,\r\n          properties: {\r\n            title: { type: Type.STRING },\r\n            days: {\r\n              type: Type.ARRAY,\r\n              items: {\r\n                type: Type.OBJECT,\r\n                properties: {\r\n                  dayName: { type: Type.STRING },\r\n                  meals: {\r\n                    type: Type.ARRAY,\r\n                    items: {\r\n                      type: Type.OBJECT,\r\n                      properties: {\r\n                        type: { type: Type.STRING },\r\n                        name: { type: Type.STRING },\r\n                        ingredients: { type: Type.ARRAY, items: { type: Type.STRING } },\r\n                        recipe: { type: Type.STRING },\r\n                        calories: { type: Type.STRING },\r\n                        notes: { type: Type.STRING },\r\n                      },\r\n                      required: [\"type\", \"name\", \"ingredients\", \"recipe\", \"calories\"]\r\n                    }\r\n                  }\r\n                },\r\n                required: [\"dayName\", \"meals\"]\r\n              }\r\n            }\r\n          },\r\n          required: [\"title\", \"days\"]\r\n        }\r\n      }\r\n    });\r\n\r\n    return NextResponse.json(JSON.parse(response.text || '{}'));\r\n  } catch (error: any) {\r\n    console.error(\"Diet generation error:\", error);\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,KAAK,IAAI,4KAAW,CAAC;IAAE,QAAQ,QAAQ,GAAG,CAAC,cAAc,IAAI;AAAG;AAE/D,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,IAAI;QAE/B,MAAM,SAAS,CAAC;;iBAEH,EAAE,SAAS,QAAQ,CAAC;qBAChB,EAAE,SAAS,KAAK,CAAC,IAAI,CAAC,MAAM;sBAC3B,EAAE,SAAS,WAAW,CAAC;iBAC5B,EAAE,SAAS,SAAS,IAAI,OAAO;sBAC1B,EAAE,SAAS,MAAM,IAAI,WAAW;qBACjC,EAAE,SAAS,WAAW,IAAI,IAAI;cACrC,EAAE,SAAS,WAAW,IAAI,SAAS;;;;;IAK7C,CAAC;QAED,MAAM,WAAW,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC;YAC/C,OAAO;YACP,UAAU;YACV,QAAQ;gBACN,kBAAkB;gBAClB,gBAAgB;oBACd,MAAM,qKAAI,CAAC,MAAM;oBACjB,YAAY;wBACV,OAAO;4BAAE,MAAM,qKAAI,CAAC,MAAM;wBAAC;wBAC3B,MAAM;4BACJ,MAAM,qKAAI,CAAC,KAAK;4BAChB,OAAO;gCACL,MAAM,qKAAI,CAAC,MAAM;gCACjB,YAAY;oCACV,SAAS;wCAAE,MAAM,qKAAI,CAAC,MAAM;oCAAC;oCAC7B,OAAO;wCACL,MAAM,qKAAI,CAAC,KAAK;wCAChB,OAAO;4CACL,MAAM,qKAAI,CAAC,MAAM;4CACjB,YAAY;gDACV,MAAM;oDAAE,MAAM,qKAAI,CAAC,MAAM;gDAAC;gDAC1B,MAAM;oDAAE,MAAM,qKAAI,CAAC,MAAM;gDAAC;gDAC1B,aAAa;oDAAE,MAAM,qKAAI,CAAC,KAAK;oDAAE,OAAO;wDAAE,MAAM,qKAAI,CAAC,MAAM;oDAAC;gDAAE;gDAC9D,QAAQ;oDAAE,MAAM,qKAAI,CAAC,MAAM;gDAAC;gDAC5B,UAAU;oDAAE,MAAM,qKAAI,CAAC,MAAM;gDAAC;gDAC9B,OAAO;oDAAE,MAAM,qKAAI,CAAC,MAAM;gDAAC;4CAC7B;4CACA,UAAU;gDAAC;gDAAQ;gDAAQ;gDAAe;gDAAU;6CAAW;wCACjE;oCACF;gCACF;gCACA,UAAU;oCAAC;oCAAW;iCAAQ;4BAChC;wBACF;oBACF;oBACA,UAAU;wBAAC;wBAAS;qBAAO;gBAC7B;YACF;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,SAAS,IAAI,IAAI;IACvD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF"}}]
}